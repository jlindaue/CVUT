<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lecture 04</title>
</head>
<body>
    <script>
        //
        // Data functions
        //

        function getRandomInt(min, max) {
            return Math.floor(Math.random() * (max - min + 1)) + min;
        }

        function getData(error) {
            if (!error) {
                return 1
            } else {
                throw new Error("Error value")
            }
        }

        function getCbData(doneCb, error = false) {
            const delay = getRandomInt(500, 3000)
            setTimeout(() => {
                doneCb(error ? "Error value" : null, !error ? 1 : null)
            }, delay)
        }

        function getPromiseData(error = false) {
            return new Promise((resolve, reject) => {
                const delay = getRandomInt(500, 3000)
                setTimeout(() => {
                    if (error) {
                        reject("Error value")
                    } else {
                        resolve(1)
                    }
                }, delay)
            })
        }

        //
        // Tasks functions
        //

        /*

        Synchronous functions
            - Call them
            - Try to catch errors thrown by them

        Browser Event Loop
            https://www.youtube.com/watch?v=cCOL7MC4Pl0

        Event Listeners
            - addEventListener
            - pub/sub

        Callbacks
            - setTimeout
            - done
            - error handling
            - getCbData function
            - excercise:
                ok -> ok -> error

        Promises
            - fetch
                fetch('https://swapi.co/api/people/')
                    .then(res => res.json())
                    .then(res => console.log(res))
                    .catch(e => console.log(e));
                - then/catch
                - then(null, errHandler)
            - new Promise((resolve, reject) => {})
            - excercise:
                ok -> error -> ok -> error -> catch handler
                        ^ recover from error
            - Promise.all/race
            - excercise:
                ok ------------- +              ok -- +
                error (recover)  + ALL -> ok -> ok -- + -> RACE -> END
                ok ------------- +

        Async/Await
            - async await
            - try/catch
            - excercise:
                ok ------------- +                         ok -- +
                error (recover)  + ALL -> err (recover) -> ok -- + -> RACE -> END
                ok ------------- +
        */

    </script>

</body>
</html>